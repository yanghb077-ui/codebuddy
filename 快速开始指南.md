# 健身记录App - 快速开始指南

## 系统要求

- **Node.js**: 16.0 或更高版本
- **MongoDB**: 4.0 或更高版本
- **npm**: 随Node.js一起安装

## 快速启动（3步）

### 第1步：启动MongoDB
确保MongoDB服务正在运行：

```bash
#首先打开mongod所在路径（C:\Program Files\MongoDB\Server\8.2\bin>），然后在命令行中运行（如果是首次打开，得先输入‘mkdir C:\data\db’）
mongod
```

如果提示"mongod 不是内部命令"，请：
1. 访问 https://www.mongodb.com/try/download/community
2. 下载并安装MongoDB Community Server
3. 将MongoDB的bin目录添加到系统环境变量PATH中

### 第2步：启动后端服务器

**方式1：使用启动脚本（目前暂时无法使用）**

双击运行：`backend目录下的start-backend.bat`

**方式2：手动启动**
打开命令行输入以下指令

```
cd /d "d:\6318 2\backend"
npm install
npm start

```

**验证**：浏览器访问 http://localhost:5000/api/health

应该看到：
```json
{
  "success": true,
  "message": "服务器运行正常"
}
```

### 第3步：启动前端

**方式1：使用启动脚本（推荐）**

双击运行：`frontend目录下的start-frontend.bat`

**方式2：手动启动**

```bash
cd /d "d:\6318 2\frontend"
npm install
npm run dev
```

**访问**：浏览器打开 http://localhost:5173

## 初始化动作库

首次使用时，需要初始化动作库（内置30+常见健身动作）：

打开浏览器访问：
```
http://localhost:5000/api/exercises/initialize
```

或使用命令行：
```bash
curl -X POST http://localhost:5000/api/exercises/initialize
```

**成功响应**：
```json
{
  "success": true,
  "message": "默认动作创建成功",
  "count": 24
}
```

## 功能演示

### 1. 开始训练
- 点击"开启训练"按钮
- 选择训练动作（如：卧推、深蹲等）
- 设置重量和次数，点击"添加组数"
- 每组完成后点击"完成"
- 所有动作完成后点击"完成训练"

### 2. 查看历史记录
- 首页显示最近7天训练概况
- 点击"训练日历"查看30天历史
- 点击具体日期查看训练详情

### 3. 动作库
- 内置7大部位、3个难度等级的动作
- 支持按部位筛选动作
- 可自定义添加新动作

## 常见问题解决

### ❌ 问题1：npm命令找不到

**解决方案**：
1. 访问 https://nodejs.org/
2. 下载并安装Node.js（LTS版本）
3. 重新打开命令行窗口
4. 验证安装：
   ```bash
   node --version
   npm --version
   ```

### ❌ 问题2：MongoDB连接失败

**错误信息**："MongoDB数据库连接失败"

**解决方案**：
1. 确保MongoDB服务已启动：`mongod`
2. 检查端口27017是否被占用
3. 修改 `backend/.env` 文件：
   ```env
   MONGODB_URI=mongodb://localhost:27017/fitness-tracker
   ```

### ❌ 问题3：端口被占用

**后端端口5000被占用**：
修改 `backend/.env`：
```env
PORT=5001
```

**前端端口5173被占用**：
修改 `frontend/vite.config.js`：
```javascript
server: {
  port: 5174,
  proxy: {
    '/api': {
      target: 'http://localhost:5000',  // 根据后端端口修改
      changeOrigin: true
    }
  }
}
```

### ❌ 问题4：跨域错误（CORS）

**解决方案**：
确保后端 `backend/server.js` 中的CORS配置：
```javascript
this.app.use(cors({
  origin: 'http://localhost:5173',  // 根据前端端口修改
  credentials: true
}));
```

### ❌ 问题5：前端无法访问后端API

**检查步骤**：
1. 确保后端已启动（访问 http://localhost:5000/api/health 验证）
2. 检查前端 `vite.config.js` 代理配置：
   ```javascript
   proxy: {
     '/api': {
       target: 'http://localhost:5000',  // 后端地址
       changeOrigin: true
     }
   }
   ```
3. 重启前端服务：npm run dev

## 项目结构速览

```
backend/
├── server.js              # 后端入口
├── .env                   # 环境变量
├── models/                # 数据模型
├── controllers/           # 控制器
├── services/              # 业务逻辑
├── routes/                # 路由
└── utils/                 # 工具函数

frontend/
├── src/
│   ├── App.jsx           # 主应用
│   ├── main.jsx          # 前端入口
│   ├── index.css         # 全局样式
│   └── services/api.js   # API接口
├── index.html
└── vite.config.js        # Vite配置
```

## API测试（使用浏览器）

**测试后端API**：
- 健康检查：http://localhost:5000/api/health
- 获取动作列表：http://localhost:5000/api/exercises
- 获取训练记录：http://localhost:5000/api/workouts

**预期响应**：JSON格式的数据

## 开发调试

### 查看日志
后端日志会输出到控制台，包含：
- API请求和响应
- 数据库操作
- 错误信息

### 浏览器开发者工具
前端调试：
- F12 打开开发者工具
- Network标签查看API请求
- Console标签查看错误信息

## 下一步

- 阅读详细文档：`README.md`
- 自定义动作库：访问 /api/exercises 接口
- 添加新功能：参考现有代码结构

## 需要帮助？

1. 检查 `README.md` 完整文档
2. 查看后端日志输出
3. 检查浏览器Console错误
4. 确保所有服务都已启动

---

**祝你训练愉快！ 💪**
